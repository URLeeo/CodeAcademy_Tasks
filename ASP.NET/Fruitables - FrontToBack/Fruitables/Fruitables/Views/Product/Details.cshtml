@model Fruitables.Models.Product

@{
    ViewData["Title"] = "Product Detail";
}

<!-- Single Page Header start -->
<div class="container-fluid page-header py-5">
    <h1 class="text-center text-white display-6">Product Detail</h1>
    <ol class="breadcrumb justify-content-center mb-0">
        <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Home</a></li>
        <li class="breadcrumb-item"><a asp-controller="Product" asp-action="Index">Shop</a></li>
        <li class="breadcrumb-item active text-white">@Model.Name</li>
    </ol>
</div>
<!-- Single Page Header End -->
<!-- Product Detail Start -->
<div class="container-fluid py-5 mt-5">
    <div class="container py-5">
        <div class="row g-4 mb-5">

            <!-- Images -->
            <div class="col-lg-6 col-xl-5">
                <div class="border rounded">
                    @{
                        var mainImg = Model.ProductImages?.FirstOrDefault(x => !x.IsDeleted && x.IsMain)?.Image;
                    }

                    @if (!string.IsNullOrWhiteSpace(mainImg))
                    {
                        <img src="~/img/@mainImg" class="img-fluid rounded w-100" alt="@Model.Name" />
                    }
                    else
                    {
                        <div class="border p-5 text-center">No Image</div>
                    }
                </div>

                <div class="d-flex flex-wrap mt-3">
                    @foreach (var img in Model.ProductImages.Where(x => !x.IsDeleted))
                    {
                        <div class="border rounded me-2 mb-2 p-1">
                            <img src="~/img/@img.Image"
                                 style="width:90px;height:90px;object-fit:cover;"
                                 class="rounded"
                                 alt="" />
                        </div>
                    }
                </div>
            </div>


            <!-- Details -->
            <div class="col-lg-6 col-xl-7">
                <h4 class="fw-bold mb-3">@Model.Name</h4>

                <p class="mb-3">
                    <span class="text-muted">Category:</span>
                    <span class="fw-semibold">@(Model.Category?.Name ?? "No category")</span>
                </p>

                <h5 class="fw-bold mb-3 text-primary">@Model.Price azn</h5>

                <!-- Rating (UI only, dummy) -->
                <div class="d-flex mb-4">
                    <i class="fa fa-star text-secondary"></i>
                    <i class="fa fa-star text-secondary"></i>
                    <i class="fa fa-star text-secondary"></i>
                    <i class="fa fa-star text-secondary"></i>
                    <i class="fa fa-star"></i>
                </div>

                <p class="mb-4 text-muted">
                    @Model.Description
                </p>

                <button type="button"
                        class="add-to-cart btn border border-secondary rounded-pill px-4 py-2 mb-4 text-primary"
                        data-id="@Model.Id">
                    <i class="fa fa-shopping-bag me-2 text-primary"></i> Add to cart
                </button>

                <a asp-controller="Product" asp-action="Index"
                   class="btn btn-link text-decoration-none p-0">
                    ← Back to Shop List
                </a>
            </div>

        </div>
    </div>
</div>
<!-- Product Detail End -->

<script src="~/js/customBasketAdd.js"></script>
